<!DOCTYPE html>
<div id="root"></div>
<script type="module">
  import { test, assert } from "./lib.js";
  import { Root, html } from "../html.js";

  test(() => {
    const r = Root.appendInto(root);

    const sequence = [];

    const classes =
      (...args) =>
      (node) => {
        const original = node.className;
        for (const arg of args) {
          console.log(arg);
          if (typeof arg === "string") {
            node.classList.add(arg);
          } else {
            for (const [key, value] of Object.entries(arg)) {
              node.classList.toggle(key, value);
            }
          }
        }
        return () => {
          node.className = original;
        };
      };

    const template = (part) => html`<div ${part}>Hello, world!</div>`;

    r.render(template(classes("a", "b")));
    assert.eq(root.firstChild.className, "a b");

    r.render(template(classes({ c: true, d: true })));
    assert.eq(root.firstChild.className, "c d");
  });
</script>
