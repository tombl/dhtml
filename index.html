<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="reset.css" />
		<title>dhtml</title>
		<script type="module">
			import { Root, html } from './html.js'
			const r = Root.appendInto(document.body)
			Object.assign(globalThis, { Root, html, r })
			r.render({
				i: 0,
				render(controller) {
					const code = `\
import { Root, html } from "https://tombl.github.io/dhtml/html.js"

const app = {
  i: 0,
  render(controller) {
    return html\`
      <button
        @click=\${() => {
          this.i++
          controller.invalidate()
        }}
      >
        Count: \${this.i}
      </button>
    \`
  },
}

Root.appendInto(document.body).render(app)`

					return html`
						<main style="padding: 1rem; display: flex; flex-direction: column; gap: 1rem">
							<header>
								<h1><code>dhtml</code></h1>
								<p>a post-component library for building user interfaces on the web.</p>
								<p><a href="https://github.com/tombl/dhtml">see the source</a> | <a href="test/">run the tests</a></p>
							</header>
							<pre>${code}</pre>
							<button
								@click=${() => {
									this.i++
									controller.invalidate()
								}}
							>
								Count: ${this.i}
							</button>
						</main>
					`
				},
			})
		</script>
	</head>
	<body></body>
</html>
